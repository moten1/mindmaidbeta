const express = require('express');
const http = require('http');
// This is the class we revised together earlier
const EmotionWSHandler = require('./WebSocketServer'); 

const app = express();
const server = http.createServer(app);

// Basic health check for Render
app.get('/health', (req, res) => res.send('OK'));

// INITIALIZE THE WEBSOCKETS
// This links the logic to the actual HTTP traffic
const emotionHandler = new EmotionWSHandler(server, { 
  path: "/api/emotion/stream" 
});

const PORT = process.env.PORT || 10000;
server.listen(PORT, () => {
  console.log(`ðŸš€ Emotion AI Backend running on port ${PORT}`);
});