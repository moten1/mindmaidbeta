'use strict';

/**
 * Main WebSocket entry point
 * This structure correctly exposes:
 *  - WebSocket class
 *  - WebSocketServer class
 *  - createWebSocketStream()
 */

const WebSocket = require('./lib/websocket');
const createWebSocketStream = require('./lib/stream');
const WebSocketServer = require('./lib/websocket-server');

// Attach API
WebSocket.createWebSocketStream = createWebSocketStream;
WebSocket.WebSocket = WebSocket;            // Official alias (matches the 'ws' package)
WebSocket.Server = WebSocketServer;         // Legacy alias
WebSocket.WebSocketServer = WebSocketServer; // Modern alias

// Optional low-level classes (expose ONLY if your system actually uses them)
WebSocket.Receiver = require('./lib/receiver');
WebSocket.Sender = require('./lib/sender');

module.exports = WebSocket;
